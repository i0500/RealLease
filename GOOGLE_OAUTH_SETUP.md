# Google OAuth 2.0 μ„¤μ • κ°€μ΄λ“

RealLease μ•±μ—μ„ κµ¬κΈ€ μ¤ν”„λ λ“μ‹νΈ μ ‘κ·Όμ„ μ„ν• OAuth 2.0 μ„¤μ • λ°©λ²•μ…λ‹λ‹¤.

## π― κ°μ”

RealLeaseλ” κµ¬κΈ€ μ¤ν”„λ λ“μ‹νΈλ¥Ό λ°μ΄ν„°λ² μ΄μ¤λ΅ μ‚¬μ©ν•κΈ° λ•λ¬Έμ—, μ‚¬μ©μμ κµ¬κΈ€ κ³„μ • μΈμ¦κ³Ό μ¤ν”„λ λ“μ‹νΈ μ ‘κ·Ό κ¶ν•μ΄ ν•„μ”ν•©λ‹λ‹¤.

## π“‹ μ‚¬μ „ μ”κµ¬μ‚¬ν•­

- Google κ³„μ •
- ν”„λ΅μ νΈκ°€ λ°°ν¬λ  λ„λ©”μΈ (μ: https://reallease.vercel.app)
- κ°λ° ν™κ²½: http://localhost:5173

## π€ μ„¤μ • λ‹¨κ³„

### 1λ‹¨κ³„: Google Cloud Console μ ‘μ†

1. https://console.cloud.google.com μ ‘μ†
2. Google κ³„μ •μΌλ΅ λ΅κ·ΈμΈ

### 2λ‹¨κ³„: μƒ ν”„λ΅μ νΈ μƒμ„±

1. μƒλ‹¨ λ©”λ‰΄μ—μ„ **"ν”„λ΅μ νΈ μ„ νƒ"** ν΄λ¦­
2. **"μƒ ν”„λ΅μ νΈ"** ν΄λ¦­
3. ν”„λ΅μ νΈ μ •λ³΄ μ…λ ¥:
   - **ν”„λ΅μ νΈ μ΄λ¦„**: `RealLease` (λλ” μ›ν•λ” μ΄λ¦„)
   - **μ΅°μ§**: μ—†μ (κ°μΈ ν”„λ΅μ νΈ)
4. **"λ§λ“¤κΈ°"** ν΄λ¦­

### 3λ‹¨κ³„: OAuth λ™μ ν™”λ©΄ κµ¬μ„±

1. μ™Όμ½ λ©”λ‰΄μ—μ„ **"OAuth λ™μ ν™”λ©΄"** μ„ νƒ
2. **"μ™Έλ¶€"** μ„ νƒ ν›„ **"λ§λ“¤κΈ°"** ν΄λ¦­

#### μ•± μ •λ³΄
- **μ•± μ΄λ¦„**: `RealLease`
- **μ‚¬μ©μ μ§€μ› μ΄λ©”μΌ**: λ³ΈμΈ μ΄λ©”μΌ
- **μ•± λ΅κ³ **: (μ„ νƒμ‚¬ν•­)
- **μ•± λ„λ©”μΈ**:
  - μ• ν”λ¦¬μΌ€μ΄μ… ν™νμ΄μ§€: `https://your-app.vercel.app`
  - κ°μΈμ •λ³΄μ²λ¦¬λ°©μΉ¨: (μ„ νƒμ‚¬ν•­)
  - μ„λΉ„μ¤ μ•½κ΄€: (μ„ νƒμ‚¬ν•­)

#### κ°λ°μ μ—°λ½μ² μ •λ³΄
- **μ΄λ©”μΌ μ£Όμ†**: λ³ΈμΈ μ΄λ©”μΌ

#### λ²”μ„ (Scopes)
1. **"λ²”μ„ μ¶”κ°€ λλ” μ‚­μ "** ν΄λ¦­
2. λ‹¤μ λ²”μ„ μ„ νƒ:
   - `https://www.googleapis.com/auth/spreadsheets` - μ¤ν”„λ λ“μ‹νΈ μ „μ²΄ μ ‘κ·Ό
   - `https://www.googleapis.com/auth/drive.readonly` - λ“λΌμ΄λΈ μ½κΈ° (μ„ νƒμ‚¬ν•­)

3. **"μ—…λ°μ΄νΈ"** ν΄λ¦­

#### ν…μ¤νΈ μ‚¬μ©μ (κ°λ° μ¤‘)
1. **"ν…μ¤νΈ μ‚¬μ©μ μ¶”κ°€"** ν΄λ¦­
2. ν…μ¤νΈν•  Google κ³„μ • μ΄λ©”μΌ μ¶”κ°€
3. **"μ €μ¥"** ν΄λ¦­

### 4λ‹¨κ³„: OAuth 2.0 ν΄λΌμ΄μ–ΈνΈ ID μƒμ„±

1. μ™Όμ½ λ©”λ‰΄μ—μ„ **"μ‚¬μ©μ μΈμ¦ μ •λ³΄"** μ„ νƒ
2. μƒλ‹¨μ **"+ μ‚¬μ©μ μΈμ¦ μ •λ³΄ λ§λ“¤κΈ°"** ν΄λ¦­
3. **"OAuth ν΄λΌμ΄μ–ΈνΈ ID"** μ„ νƒ

#### μ• ν”λ¦¬μΌ€μ΄μ… μ ν•
- **μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…** μ„ νƒ

#### μ΄λ¦„
- `RealLease Web Client` (λλ” μ›ν•λ” μ΄λ¦„)

#### μΉμΈλ μλ°”μ¤ν¬λ¦½νΈ μ›λ³Έ
λ‹¤μ URLλ“¤μ„ μ¶”κ°€:
```
http://localhost:5173
https://your-app.vercel.app
```

#### μΉμΈλ λ¦¬λ””λ ‰μ… URI
λ‹¤μ URLλ“¤μ„ μ¶”κ°€:
```
http://localhost:5173
http://localhost:5173/auth
https://your-app.vercel.app
https://your-app.vercel.app/auth
```

**μ¤‘μ”**: μ‹¤μ  λ°°ν¬ URLλ΅ `your-app.vercel.app`λ¥Ό λ³€κ²½ν•μ„Έμ”!

4. **"λ§λ“¤κΈ°"** ν΄λ¦­

### 5λ‹¨κ³„: ν΄λΌμ΄μ–ΈνΈ ID λ³µμ‚¬

1. μƒμ„±λ OAuth 2.0 ν΄λΌμ΄μ–ΈνΈ μ •λ³΄ νμ—…μ—μ„:
   - **ν΄λΌμ΄μ–ΈνΈ ID** λ³µμ‚¬ (μ: `123456789-abcdefg.apps.googleusercontent.com`)
   - **ν΄λΌμ΄μ–ΈνΈ λ³΄μ• λΉ„λ°€λ²νΈ**λ” μ›Ή μ•±μ—μ„ μ‚¬μ©ν•μ§€ μ•μ

2. λ‚μ¤‘μ— ν™•μΈν•λ ¤λ©΄:
   - "μ‚¬μ©μ μΈμ¦ μ •λ³΄" νμ΄μ§€μ—μ„ μƒμ„±ν• ν΄λΌμ΄μ–ΈνΈ μ΄λ¦„ ν΄λ¦­
   - ν΄λΌμ΄μ–ΈνΈ ID λ³µμ‚¬

### 6λ‹¨κ³„: Sheets API ν™μ„±ν™”

1. μ™Όμ½ λ©”λ‰΄μ—μ„ **"API λ° μ„λΉ„μ¤" > "λΌμ΄λΈλ¬λ¦¬"** μ„ νƒ
2. κ²€μƒ‰μ°½μ— **"Google Sheets API"** μ…λ ¥
3. **"Google Sheets API"** ν΄λ¦­
4. **"μ‚¬μ©"** ν΄λ¦­

## π”§ ν”„λ΅μ νΈ μ„¤μ •

### λ΅μ»¬ κ°λ° ν™κ²½

1. `.env` νμΌ μƒμ„± (ν”„λ΅μ νΈ λ£¨νΈ):
```bash
cp .env.example .env
```

2. `.env` νμΌ μμ •:
```env
# Google OAuth Client ID
VITE_GOOGLE_CLIENT_ID=μ—¬κΈ°μ—-λ³µμ‚¬ν•-ν΄λΌμ΄μ–ΈνΈ-ID-λ¶™μ—¬λ„£κΈ°.apps.googleusercontent.com

# App Configuration
VITE_APP_NAME=RealLease
VITE_APP_VERSION=1.0.0

# Development Mode (ν”„λ΅λ•μ…μ—μ„λ” false)
VITE_DEV_MODE=false
```

3. κ°λ° μ„λ²„ μ¬μ‹μ‘:
```bash
npm run dev
```

### Vercel λ°°ν¬ ν™κ²½

1. Vercel λ€μ‹λ³΄λ“μ—μ„ ν”„λ΅μ νΈ μ„ νƒ
2. **"Settings" > "Environment Variables"** μ΄λ™
3. ν™κ²½ λ³€μ μ¶”κ°€:
   - **Name**: `VITE_GOOGLE_CLIENT_ID`
   - **Value**: λ³µμ‚¬ν• ν΄λΌμ΄μ–ΈνΈ ID
   - **Environment**: Production, Preview, Development λ¨λ‘ μ„ νƒ
4. **"Save"** ν΄λ¦­
5. ν”„λ΅μ νΈ μ¬λ°°ν¬

## π§ ν…μ¤νΈ

### κ°λ° λ¨λ“ ν…μ¤νΈ (Google μΈμ¦ μ—†μ΄)

Google OAuth μ„¤μ • μ—†μ΄ λΉ λ¥΄κ² ν…μ¤νΈν•λ ¤λ©΄:

1. `.env` νμΌ μμ •:
```env
VITE_DEV_MODE=true
VITE_GOOGLE_CLIENT_ID=
```

2. κ°λ° μ„λ²„ μ¬μ‹μ‘:
```bash
npm run dev
```

3. http://localhost:5173/auth μ ‘μ†
4. μ•„λ¬΄ λ²„νΌμ΄λ‚ ν΄λ¦­ν•λ©΄ ν…μ¤νΈ κ³„μ •μΌλ΅ λ΅κ·ΈμΈλ¨

**μ£Όμ**: κ°λ° λ¨λ“μ—μ„λ” μ‹¤μ  κµ¬κΈ€ μ‹νΈ μ—°λ™μ΄ μ‘λ™ν•μ§€ μ•μµλ‹λ‹¤!

### ν”„λ΅λ•μ… ν…μ¤νΈ

1. `.env` νμΌ μμ •:
```env
VITE_DEV_MODE=false
VITE_GOOGLE_CLIENT_ID=μ‹¤μ -ν΄λΌμ΄μ–ΈνΈ-ID
```

2. κ°λ° μ„λ²„ μ¬μ‹μ‘
3. http://localhost:5173/auth μ ‘μ†
4. **"Google κ³„μ •μΌλ΅ λ΅κ·ΈμΈ"** ν΄λ¦­
5. Google κ³„μ • μ„ νƒ λ° κ¶ν• μΉμΈ
6. λ΅κ·ΈμΈ μ„±κ³µ ν™•μΈ

## β— λ¬Έμ  ν•΄κ²°

### "Auth service not initialized" μ¤λ¥

**μ›μΈ**: Google Client IDκ°€ μ„¤μ •λμ§€ μ•μ

**ν•΄κ²°**:
1. `.env` νμΌμ΄ μ΅΄μ¬ν•λ”μ§€ ν™•μΈ
2. `VITE_GOOGLE_CLIENT_ID` κ°’μ΄ μ¬λ°”λ¥΄κ² μ„¤μ •λμ—λ”μ§€ ν™•μΈ
3. κ°λ° μ„λ²„ μ¬μ‹μ‘ (`Ctrl+C` ν›„ `npm run dev`)

### "Access blocked: This app's request is invalid"

**μ›μΈ**: OAuth λ™μ ν™”λ©΄ μ„¤μ • λ―Έμ™„λ£

**ν•΄κ²°**:
1. Google Cloud Consoleμ—μ„ OAuth λ™μ ν™”λ©΄ μ™„μ „ν μ„¤μ •
2. ν…μ¤νΈ μ‚¬μ©μμ— λ³ΈμΈ κ³„μ • μ¶”κ°€
3. μΉμΈλ λ„λ©”μΈ ν™•μΈ

### "redirect_uri_mismatch" μ¤λ¥

**μ›μΈ**: μΉμΈλ λ¦¬λ””λ ‰μ… URIκ°€ μΌμΉν•μ§€ μ•μ

**ν•΄κ²°**:
1. Google Cloud Console β†’ μ‚¬μ©μ μΈμ¦ μ •λ³΄
2. OAuth ν΄λΌμ΄μ–ΈνΈ ID μμ •
3. μΉμΈλ λ¦¬λ””λ ‰μ… URIμ— ν„μ¬ URL μ¶”κ°€
4. λ³€κ²½μ‚¬ν•­ μ €μ¥ ν›„ 5-10λ¶„ λ€κΈ°

### κ¶ν• μ¤λ¥: "The caller does not have permission"

**μ›μΈ**: Sheets APIκ°€ ν™μ„±ν™”λμ§€ μ•μ

**ν•΄κ²°**:
1. Google Cloud Console β†’ API λ° μ„λΉ„μ¤ β†’ λΌμ΄λΈλ¬λ¦¬
2. "Google Sheets API" κ²€μƒ‰
3. "μ‚¬μ©" ν΄λ¦­

## π“ μ¶”κ°€ λ¦¬μ†μ¤

- [Google Identity λ¬Έμ„](https://developers.google.com/identity/protocols/oauth2)
- [Google Sheets API λ¬Έμ„](https://developers.google.com/sheets/api)
- [OAuth 2.0 κ°€μ΄λ“](https://developers.google.com/identity/protocols/oauth2/javascript-implicit-flow)

## π”’ λ³΄μ• μ£Όμμ‚¬ν•­

1. β… `.env` νμΌμ„ μ λ€ Gitμ— μ»¤λ°‹ν•μ§€ λ§μ„Έμ”
2. β… ν΄λΌμ΄μ–ΈνΈ IDλ” κ³µκ°λμ–΄λ„ κ΄μ°®μ§€λ§, ν΄λΌμ΄μ–ΈνΈ λ³΄μ• λΉ„λ°€λ²νΈλ” λΉ„κ³µκ°
3. β… μΉμΈλ λ„λ©”μΈλ§ μ¶”κ°€ν•μ—¬ μ•…μ© λ°©μ§€
4. β… ν”„λ΅λ•μ… λ°°ν¬ μ „ OAuth λ™μ ν™”λ©΄ κ²€ν†  λ° κ²μ‹

---

**μ„¤μ • μ™„λ£ ν›„**: http://localhost:5173 λλ” λ°°ν¬λ URLμ—μ„ Google λ΅κ·ΈμΈ ν…μ¤νΈ!
